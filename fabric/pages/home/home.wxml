<!-- pages/home/home.wxml -->
<view class="home_container">
  <!-- 顶部标题栏 -->
  <view class="tab-header">
    <view class="tab active">
      <text>我的图解</text>
      <view class="tab-line active"></view>
    </view>
    <!-- 右上角加号按钮 -->
    <view class="add-btn" bindtap="toggleImportOptions">
      <text class="add-icon">+</text>
    </view>
  </view>
  <!-- 导入选项弹出层 -->
  <view class="import-options {{showImportOptions ? 'show' : ''}}">
    <view class="import-option" bindtap="chooseImage">
      <image class="option-icon" src="/assets/image.svg" mode="aspectFit"></image>
      <text>导入图片</text>
    </view>
    <view class="import-option" bindtap="choosePDF">
      <image class="option-icon" src="/assets/pdf_logo.svg" mode="aspectFit"></image>
      <text>导入PDF</text>
    </view>
  </view>
  <!-- 内容区域 -->
  <view class="content-area">
    <!-- 我的图解内容 -->
    <view class="tab-content">
      <block wx:if="{{allItems.length === 0}}">
        <view class="empty-state">
          <text class="empty-text">内置计数器，建议导入带有行与号的图解</text>
        </view>
      </block>
      <block wx:else>
        <view class="items-grid">
          <view class="item {{item.type === 'image' ? 'image-item' : 'file-item'}}" wx:for="{{allItems}}" wx:key="id" bindtap="navigateToDetail" data-id="{{item.id}}">
            <image src="{{item.path}}" mode="aspectFill"></image>
            <view class="item-info">
              <text class="item-name">{{item.name}}</text>
              <text class="item-type">{{item.type === 'image' ? '图片' : 'PDF'}}</text>
              <text class="item-more" bindtap="showActionSheet" data-id="{{item.id}}" data-type="{{item.type}}">...</text>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>
  <!-- 遮罩层 -->
  <view class="mask {{showImportOptions ? 'show' : ''}}" bindtap="toggleImportOptions"></view>
  
  <!-- WeUI ActionSheet -->
  <action-sheet show="{{showActionSheet}}" actions="{{actions}}" bind:actiontap="handleActionClick" bind:close="closeActionSheet"/>
  
  <!-- 重命名对话框 -->
  <mp-dialog title="重命名" show="{{showRenameModal}}" bindbuttontap="handleRenameDialogButtonClick" buttons="{{renameButtons}}">
    <view>
      <input class="rename-input" type="text" value="{{newItemName}}" bindinput="onRenameInput" placeholder="请输入新名称" />
    </view>
  </mp-dialog>
  
  <!-- 删除确认对话框 -->
  <mp-dialog title="确认删除" show="{{showDeleteModal}}" bindbuttontap="handleDeleteDialogButtonClick" buttons="{{deleteButtons}}">
    <view class="delete-modal-content">确定要删除该项吗？此操作无法撤销。</view>
  </mp-dialog>
</view>